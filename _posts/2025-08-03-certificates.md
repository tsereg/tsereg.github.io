---
layout: post
title:  "Certificates"
date:   2025-08-03 13:06:00 +0100
categories: snippets
---

There is an automatically generated certificate for ASP.NET Core with the subject of 'CN=localhost' and friendly name
'ASP.NET Core HTTPS development certificate'. The certificate is usually in the developer's personal store and the
trusted root certificate store.

- Checking if the certificate exists in the personal store:
    - `dotnet dev-certs https --check`,
- and in the trusted root certificate store:
    - `dotnet dev-certs https --check --trust`,
- Deleting the certificates:
    - `dotnet dev-certs https --clean`.
- (Re)creating the certificates:
    - `dotnet dev-certs https --trust`.

Unless using 'certmgr', this is how to look up if the certificate exists:

- in the current user's personal store:
    - `certutil -user -store My "*localhost*"`,
- in the current user's trusted root store:
    - `certutil -user -store Root "*localhost*"`,
- in the local computer's store:
    - remove the `-user` switch.

To bind the certificate to a port so it can be used by _http.sys_ for opening TLS connections:

1. export the certificate from the current user's personal store:
    - `dotnet dev-certs https --format pfx --export-path certname.pfx --password <password>`,
1. import the certificate into local computer's personal store (run as an administrator):
    - `certutil -importpfx certname.pfx`,
1. bind the just imported certificate by looking up it's thumbprint fist:
    - `certutil -store My "*localhost*"`,
    - `netsh http add sslcert ipport=0.0.0.0:8509 certhash=0102030405060708090A0B0C0D0E0F1011121314 appid={12345678-1234-1234-1234-123456789012}`,
    - `netsh http show sslcert ipport=0.0.0.0:8509`.

Replace the certhash with the actual thumbrint of the certificate and appid with newly generated GUID (generated by PowerShell `New-Guid`, for example).





Check it out here:

- [Visual Studio Code Snippets](/stat/vscode-snippets)
